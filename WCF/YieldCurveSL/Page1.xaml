<navigation:Page x:Class="YieldCurveSL.Page1" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
           xmlns:dataVisToolkit="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit" Title="Page1 Page" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
           xmlns:toolkit="clr-namespace:System.Windows;assembly=System.Windows.Controls"
           xmlns:dataInput="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"
           xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data" 
           xmlns:inputToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
           xmlns:local="clr-namespace:YieldCurveSL" Height="547" Width="900" 
           xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
            xmlns:prim="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows.Controls.Data"
           xmlns:vsm="clr-namespace:System.Windows;assembly=System.Windows"
           xmlns:sys="clr-namespace:System;assembly=mscorlib" Loaded="Page_Loaded">
<!--
    <navigation:Page.Background>
			<ImageBrush ImageSource="/YieldCurveSL;component/Images/AllDay.ru_329.png" />
		</navigation:Page.Background> -->
    
<UserControl.Resources>
        <!--
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
        -->

        <!-- RANGE SLIDER -->
        <Style x:Key="ycRangeSlider" TargetType="local:RangeSlider">
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="Black" />
            <Setter Property="Background" Value="#7fffffff" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="local:RangeSlider">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid>
                                <Rectangle Height="2" Fill="Black" VerticalAlignment="Center" Margin="2.5,0,2.5,0" />
                                <Border x:Name="SelectedRangeBorder"
                                    Margin="0">
                                    <Grid>
                                        <Grid.Resources>
                                            <Style x:Key="EndThumbStyle" TargetType="Thumb">
                                                <Setter Property="Background" Value="#FF1F3B53"/>
                                                <Setter Property="BorderThickness" Value="1"/>
                                                <Setter Property="IsTabStop" Value="False"/>
                                                <Setter Property="BorderBrush">
                                                    <Setter.Value>
                                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                            <GradientStop Color="#FFA3AEB9" Offset="0"/>
                                                            <GradientStop Color="#FF8399A9" Offset="0.375"/>
                                                            <GradientStop Color="#FF718597" Offset="0.375"/>
                                                            <GradientStop Color="#FF617584" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Grid Background="Transparent">
                                                                <VisualStateManager.VisualStateGroups>
                                                                    <VisualStateGroup x:Name="CommonStates">
                                                                        <VisualState x:Name="Normal"/>
                                                                        <VisualState x:Name="MouseOver">
                                                                            <Storyboard>
                                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundAnimation" Storyboard.TargetProperty="Opacity">
                                                                                    <SplineDoubleKeyFrame KeyTime="0" Value="1"/>
                                                                                </DoubleAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#F2FFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#CCFFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[3].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#7FFFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="Pressed">
                                                                            <Storyboard>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#FF6DBDD1"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BackgroundAnimation" Storyboard.TargetProperty="Opacity">
                                                                                    <SplineDoubleKeyFrame KeyTime="0" Value="1"/>
                                                                                </DoubleAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[0].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#D8FFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#C6FFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#8CFFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                                <ColorAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[3].(GradientStop.Color)">
                                                                                    <SplineColorKeyFrame KeyTime="0" Value="#3FFFFFFF"/>
                                                                                </ColorAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="Disabled">
                                                                            <Storyboard>
                                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity">
                                                                                    <SplineDoubleKeyFrame KeyTime="0" Value=".55"/>
                                                                                </DoubleAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                    <VisualStateGroup x:Name="FocusStates">
                                                                        <VisualState x:Name="Focused">
                                                                            <Storyboard>
                                                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity">
                                                                                    <SplineDoubleKeyFrame KeyTime="0" Value="1"/>
                                                                                </DoubleAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="Unfocused"/>
                                                                    </VisualStateGroup>
                                                                </VisualStateManager.VisualStateGroups>
                                                                <Border x:Name="Background" Background="White" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2" Margin="0,5">
                                                                    <Grid Margin="1" Background="{TemplateBinding Background}">
                                                                        <Border x:Name="BackgroundAnimation" Opacity="0" Background="#FF448DCA"/>
                                                                        <Rectangle x:Name="BackgroundGradient">
                                                                            <Rectangle.Fill>
                                                                                <LinearGradientBrush EndPoint=".7,1" StartPoint=".7,0">
                                                                                    <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                                                    <GradientStop Color="#F9FFFFFF" Offset="0.375"/>
                                                                                    <GradientStop Color="#E5FFFFFF" Offset="0.625"/>
                                                                                    <GradientStop Color="#C6FFFFFF" Offset="1"/>
                                                                                </LinearGradientBrush>
                                                                            </Rectangle.Fill>
                                                                        </Rectangle>
                                                                    </Grid>
                                                                </Border>
                                                                <Rectangle x:Name="DisabledVisualElement" Fill="#FFFFFFFF" RadiusX="2" RadiusY="2" IsHitTestVisible="false" Opacity="0" Margin="0,15"/>
                                                                <Rectangle x:Name="FocusVisualElement" Stroke="#FF6DBDD1" StrokeThickness="1" RadiusX="1" RadiusY="1" Margin="1,6" IsHitTestVisible="false" Opacity="0"/>
                                                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="0,8" MaxHeight="10">
                                                                    <Rectangle Width="1" Fill="Black"/>
                                                                    <Rectangle Fill="Black" Width="1" Margin="1,0,0,0"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Grid.Resources>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Thumb x:Name="RangeCenterThumb"
                                           Grid.Column="1"
                                           Cursor="Hand"
                                           Margin="-5,0,-5,0"
                                           BorderBrush="{TemplateBinding BorderBrush}"
                                           BorderThickness="{TemplateBinding BorderThickness}"
                                           Background="{TemplateBinding Background}"
                                           >
                                            <Thumb.Style>
                                                <Style TargetType="Thumb">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Thumb">
                                                                <Grid Background="Transparent">
                                                                    <Border BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    Background="{TemplateBinding Background}"
                                                                    CornerRadius="3"
                                                                    />
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Thumb.Style>
                                        </Thumb>

                                        <Thumb x:Name="RangeStartThumb" 
                                           Cursor="SizeWE"
                                           Width="10"
                                           Style="{StaticResource EndThumbStyle}"
                                           BorderBrush="{TemplateBinding BorderBrush}"
                                           BorderThickness="{TemplateBinding BorderThickness}"
                                           />



                                        <Thumb x:Name="RangeEndThumb"
                                           Grid.Column="2" 
                                           Cursor="SizeWE"
                                           Width="10"
                                           Style="{StaticResource EndThumbStyle}"
                                           BorderBrush="{TemplateBinding BorderBrush}"
                                           BorderThickness="{TemplateBinding BorderThickness}"
                                           />

                                    </Grid>
                                </Border>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--                        -->
        <local:TermToStringConverter x:Key="kTermToStringConverter"/>
        <local:DateTimeFormatConverter x:Key="kDateTimeFormatConverter"/>
        <local:RateFormatConverter x:Key="kRateFormatConverter"/>

        <Style x:Key="kPolylineStyle" TargetType="Polyline">
            <Setter Property="StrokeThickness" Value="1"/>
        </Style>

        <!-- line 1 -->
        <Style x:Key="kLineDataPointStyle" TargetType="chartingToolkit:LineDataPoint">
            <Setter Property="Background" Value="#0077CC" />
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="chartingToolkit:LineDataPoint" >
                        <Grid x:Name="Root" Opacity="1" ToolTipService.ToolTip="{Binding EntryPointChartTooltip}">

                            <!--
                            <ToolTipService.ToolTip>
                                <StackPanel Margin="2,2,2,2">
                                    <ContentControl Content="{TemplateBinding DependentValue}" />
                                    <ContentControl Content="{TemplateBinding IndependentValue}" />

                                </StackPanel>
                            </ToolTipService.ToolTip>
                            -->
                            <Ellipse StrokeThickness="{TemplateBinding BorderThickness}" 
                                        Stroke="{TemplateBinding BorderBrush}" 
                                        Fill="{TemplateBinding Background}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- line 2 -->
        <Style x:Key="kLineDataPointStyle3" TargetType="chartingToolkit:LineDataPoint">
            <Setter Property="Background" Value="#990000" />
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="chartingToolkit:LineDataPoint" >
                        <Grid x:Name="Root" Opacity="0" ToolTipService.ToolTip="{Binding EntryPointChartTooltip}">
                            <Ellipse StrokeThickness="{TemplateBinding BorderThickness}" 
                                        Stroke="{TemplateBinding BorderBrush}" 
                                        Fill="{TemplateBinding Background}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- line 3 -->
        <Style x:Key="kLineDataPointStyle2" TargetType="chartingToolkit:LineDataPoint">
            <Setter Property="Background" Value="Black" />
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="chartingToolkit:LineDataPoint" >
                        <Grid x:Name="Root" Opacity="0" ToolTipService.ToolTip="{Binding EntryPointChartTooltip}">
                            <Ellipse StrokeThickness="{TemplateBinding BorderThickness}" 
                                        Stroke="{TemplateBinding BorderBrush}" 
                                        Fill="{TemplateBinding Background}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="CompareTemplate" TargetType="ComboBox">
            <!--Border BorderBrush="Orange" BorderThickness="1" CornerRadius="10" Background="Red"-->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="0" Background="Transparent">
                <!--Border BorderBrush="Gray" BorderThickness="1" CornerRadius="0" Background="{TemplateBinding Background}"-->
                <!-- tis is from content presenter ContentControl="{TemplateBinding Content}"
                    ContentTemplate="{TemplateBinding ContentTemplate}"-->
                <ContentPresenter
                   
                    Margin="{TemplateBinding Padding}">
                </ContentPresenter>
            </Border>
        </ControlTemplate>

        <ControlTemplate x:Key="FXBtnTemplate" TargetType="Button" >
            <!--Border BorderBrush="Orange" BorderThickness="1" CornerRadius="10" Background="Red"-->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="0" Background="Transparent">

                <ContentPresenter
                    Content="{TemplateBinding Content}"
                    ContentTemplate="{TemplateBinding ContentTemplate}"
                    Margin="{TemplateBinding Padding}">
                </ContentPresenter>
            </Border>
        </ControlTemplate>

        <ControlTemplate x:Key="FXHeaderTemplate" TargetType="Button" >
            <Border BorderBrush="Silver" BorderThickness="0" CornerRadius="0"  Background="Gray">
                <ContentPresenter
                    Content="{TemplateBinding Content}"
                    ContentTemplate="{TemplateBinding ContentTemplate}"
                    Margin="{TemplateBinding Padding}">
                </ContentPresenter>
            </Border>
        </ControlTemplate>

        <ControlTemplate x:Key="ButtonTemplate" TargetType="Button">
            <Border BorderBrush="SlateGray" BorderThickness="1" CornerRadius="0" Background="{TemplateBinding Background}">
                <ContentPresenter 
                    Margin="{TemplateBinding Padding}">
                </ContentPresenter>
            </Border>
        </ControlTemplate>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="Black"></Setter>
            <!--Setter Property="FontWeight" Value="Bold" /-->
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0,0" StartPoint="1,0">
                        <GradientStop Color="White" Offset="0" />
                        <GradientStop Color="LightGray" Offset="3" />
                        <GradientStop Color="#FFF2F2F2" Offset="0"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Template" Value="{StaticResource ButtonTemplate}"></Setter>
        </Style>

        <!-- start of compare combobox style-->
        <ControlTemplate x:Key="CompareTemplate1"  TargetType="ComboBox">

            <Grid>

                <Grid.Resources>
                    <Style x:Name="comboToggleStyle" TargetType="ToggleButton">
                        <Setter Property="Foreground" Value="#FF333333"/>
                        <Setter Property="Background" Value="#FF1F3B53"/>
                        <Setter Property="BorderBrush">
                            <Setter.Value>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                                    <GradientStop Color="#FF718597" Offset="0.375"/>
                                    <GradientStop Color="#FF617584" Offset="1"/>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>

                        <vsm:Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Padding" Value="3"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Grid>
                                        <vsm:VisualStateManager.VisualStateGroups>
                                            <vsm:VisualStateGroup x:Name="CommonStates">
                                                <vsm:VisualState x:Name="Normal"/>
                                                <vsm:VisualState x:Name="MouseOver">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundOverlay" Storyboard.TargetProperty="Opacity" To="1"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[3].(GradientStop.Color)" To="#7FFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Color)" To="#CCFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)" To="#F2FFFFFF"/>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                                <vsm:VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundOverlay2" Storyboard.TargetProperty="Opacity" To="1"/>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="Highlight" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)" To="#E5FFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Color)" To="#BCFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[3].(GradientStop.Color)" To="#6BFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[0].(GradientStop.Color)" To="#F2FFFFFF"/>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                                <vsm:VisualState x:Name="Disabled" />
                                            </vsm:VisualStateGroup>
                                            <vsm:VisualStateGroup x:Name="CheckStates">
                                                <vsm:VisualState x:Name="Checked">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundOverlay3" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="Highlight" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundGradient2" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient2" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)" To="#E5FFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient2" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Color)" To="#BCFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient2" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[3].(GradientStop.Color)" To="#6BFFFFFF"/>
                                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundGradient2" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[0].(GradientStop.Color)" To="#F2FFFFFF"/>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                                <vsm:VisualState x:Name="Unchecked"/>
                                            </vsm:VisualStateGroup>
                                            <vsm:VisualStateGroup x:Name="FocusStates">
                                                <vsm:VisualState x:Name="Focused">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Visibility" Duration="0">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <Visibility>Visible</Visibility>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                                <vsm:VisualState x:Name="Unfocused" />
                                            </vsm:VisualStateGroup>
                                        </vsm:VisualStateManager.VisualStateGroups>
                                        <Rectangle x:Name="Background" RadiusX="0" RadiusY="0" Fill="{TemplateBinding Background}" StrokeThickness="{TemplateBinding BorderThickness}" Stroke="{TemplateBinding BorderBrush}"/>
                                        <Rectangle x:Name="BackgroundOverlay" Opacity="0" RadiusX="0" RadiusY="0" Fill="#FF448DCA" StrokeThickness="{TemplateBinding BorderThickness}" Stroke="#00000000"/>
                                        <Rectangle x:Name="BackgroundOverlay2" Opacity="0" RadiusX="0" RadiusY="0" Fill="#FF448DCA" StrokeThickness="{TemplateBinding BorderThickness}" Stroke="#00000000"/>
                                        <Rectangle x:Name="BackgroundGradient" RadiusX="0" RadiusY="0" StrokeThickness="1" Margin="{TemplateBinding BorderThickness}" Stroke="#FFFFFFFF">
                                            <Rectangle.Fill>
                                                <LinearGradientBrush StartPoint=".7,0" EndPoint=".7,1">
                                                    <GradientStop Color="#FFFFFFFF" Offset="0" />
                                                    <GradientStop Color="#F9FFFFFF" Offset="0.375" />
                                                    <GradientStop Color="#E5FFFFFF" Offset="0.625" />
                                                    <GradientStop Color="#C6FFFFFF" Offset="1" />
                                                </LinearGradientBrush>
                                            </Rectangle.Fill>
                                        </Rectangle>
                                        <Rectangle Opacity="0" x:Name="BackgroundOverlay3" RadiusX="0" RadiusY="0" Fill="#FF448DCA" StrokeThickness="{TemplateBinding BorderThickness}" Stroke="#00000000"/>
                                        <Rectangle Opacity="0" x:Name="BackgroundGradient2" RadiusX="0" RadiusY="0" StrokeThickness="1" Margin="{TemplateBinding BorderThickness}" Stroke="#FFFFFFFF">
                                            <Rectangle.Fill>
                                                <LinearGradientBrush StartPoint=".7,0" EndPoint=".7,1">
                                                    <GradientStop Color="#FFFFFFFF" Offset="0" />
                                                    <GradientStop Color="#F9FFFFFF" Offset="0.375" />
                                                    <GradientStop Color="#E5FFFFFF" Offset="0.625" />
                                                    <GradientStop Color="#C6FFFFFF" Offset="1" />
                                                </LinearGradientBrush>
                                            </Rectangle.Fill>
                                        </Rectangle>
                                        <Rectangle x:Name="Highlight" RadiusX="0" RadiusY="0" Opacity="0" IsHitTestVisible="false" Stroke="#FF6DBDD1" StrokeThickness="1" Margin="{TemplateBinding BorderThickness}" />
                                        <ContentPresenter
                                                      x:Name="contentPresenter"
                                                      Content="{TemplateBinding Content}"
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Margin="{TemplateBinding Padding}"/>
                                        <Rectangle x:Name="FocusVisualElement" RadiusX="0" Margin="1"  RadiusY="0" Stroke="#FF6DBDD1" StrokeThickness="1" Visibility="Collapsed" IsHitTestVisible="false" />
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Grid.Resources>
                <vsm:VisualStateManager.VisualStateGroups>
                    <vsm:VisualStateGroup x:Name="CommonStates">
                        <vsm:VisualState x:Name="Normal" />
                        <vsm:VisualState x:Name="MouseOver" />
                        <vsm:VisualState x:Name="Disabled">
                            <Storyboard>
                                <DoubleAnimation Duration="00:00:00" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="(UIElement.Opacity)" To=".55"/>
                            </Storyboard>
                        </vsm:VisualState>
                    </vsm:VisualStateGroup>
                    <vsm:VisualStateGroup x:Name="FocusStates">
                        <vsm:VisualState x:Name="Focused">
                            <Storyboard>
                                <DoubleAnimation Duration="00:00:00" Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                            </Storyboard>
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="Unfocused"/>
                        <vsm:VisualState x:Name="FocusedDropDown">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Duration="00:00:00" Storyboard.TargetName="PopupBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </vsm:VisualState>
                    </vsm:VisualStateGroup>
                    <vsm:VisualStateGroup x:Name="ValidationStates">
                        <vsm:VisualState x:Name="Valid"/>
                        <vsm:VisualState x:Name="InvalidUnfocused">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0" >
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="InvalidFocused">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0" >
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsOpen">
                                    <DiscreteObjectKeyFrame KeyTime="0" >
                                        <DiscreteObjectKeyFrame.Value>
                                            <sys:Boolean>True</sys:Boolean>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </vsm:VisualState>
                    </vsm:VisualStateGroup>
                </vsm:VisualStateManager.VisualStateGroups>
                <Border x:Name="ContentPresenterBorder" CornerRadius="0">
                    <Grid>
                        <ToggleButton x:Name="DropDownToggle" Style="{StaticResource comboToggleStyle}"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  Margin="0" HorizontalContentAlignment="Right" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}">
                            <Path x:Name="BtnArrow" Height="4" Width="8" Stretch="Uniform" Data="F1 M 301.14,-189.041L 311.57,-189.041L 306.355,-182.942L 301.14,-189.041 Z " Margin="0,0,6,0" HorizontalAlignment="Right">
                                <Path.Fill>
                                    <SolidColorBrush x:Name="BtnArrowColor" Color="#FF333333"/>
                                </Path.Fill>
                            </Path>
                        </ToggleButton>
                        <ContentPresenter x:Name="ContentPresenter" 
                                                Margin="{TemplateBinding Padding}"  
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                            <TextBlock Text=" " />
                        </ContentPresenter>
                    </Grid>
                </Border>
                <Rectangle x:Name="DisabledVisualElement" RadiusX="0" RadiusY="0" Fill="White" Opacity="0" IsHitTestVisible="false" />
                <Rectangle x:Name="FocusVisualElement" RadiusX="0" RadiusY="0" Margin="1"  Stroke="#FF6DBDD1" StrokeThickness="1" Opacity="0" IsHitTestVisible="false" />

                <Popup x:Name="Popup">
                    <Border x:Name="PopupBorder" HorizontalAlignment="Stretch" Height="Auto" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" CornerRadius="3">
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                <GradientStop Color="#FFFEFEFE" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <ScrollViewer x:Name="ScrollViewer" BorderThickness="0" Padding="1">
                            <ItemsPresenter/>
                        </ScrollViewer>
                    </Border>
                </Popup>
            </Grid>

        </ControlTemplate>


        <Style TargetType="ComboBox" x:Key="ComboStyle">
            <Setter Property="Padding" Value="6,2,25,2" />
            <Setter Property="Background" Value="#FF1F3B53"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="TabNavigation" Value="Once" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FFA3AEB9" Offset="0"/>
                        <GradientStop Color="#FF8399A9" Offset="0.375"/>
                        <GradientStop Color="#FF718597" Offset="0.375"/>
                        <GradientStop Color="#FF617584" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Template" Value="{StaticResource CompareTemplate1}"></Setter>
        </Style>

    </UserControl.Resources>
    
    <Grid x:Name="LayoutRoot" Background="White" Height="816">
        <controls:TabControl Height="515" HorizontalAlignment="Left" Name="tabControl1" VerticalAlignment="Top" Width="900">
            <controls:TabItem Header="Yield Curves" Name="tabItem1" Loaded="tabItem1_Loaded">

                <Grid Background="Transparent" x:Name="LayoutChartMain" Margin="0,0,0,0" >
                    <Grid Background="Transparent" x:Name="LayoutChart1" Margin="0,0,0,0"  Visibility="Visible">
                        <Grid Background="Transparent" x:Name="GridLeft" Margin="0,0,735,0"  Visibility="Visible">
                            <!-- Have replaced by Expander 
                            <controls:TreeView Name="treeView1" Loaded="treeView1_Loaded" SelectedItemChanged="treeView1_SelectedItemChanged" FontSize="8" Margin="0,0,0,0" BorderBrush="Silver" Width="140">
                                
                                <controls:TreeView.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="White" Offset="0" />
                                        <GradientStop Color="Gray" Offset="3" />
                                        <GradientStop Color="#FFF2F2F2" Offset="0" />
                                    </LinearGradientBrush>
                                </controls:TreeView.Background>
                               
                                <controls:TreeView.ItemTemplate>
                                    <toolkit:HierarchicalDataTemplate ItemsSource="{Binding SubTree}">
                                        <TextBlock Margin="0" Text="{Binding name, Mode=OneWay}" FontSize="11" />
                                    </toolkit:HierarchicalDataTemplate>
                                </controls:TreeView.ItemTemplate>
                            </controls:TreeView>
                            -->
                            
                            <!-- Expander control -->
                            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                                <ScrollViewer.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="White" Offset="0" />
                                        <GradientStop Color="Gray" Offset="3" />
                                        <GradientStop Color="#FFF2F2F2" Offset="0" />
                                    </LinearGradientBrush>
                                </ScrollViewer.Background>
                                <StackPanel x:Name="ExpanderStackParent">
                                    <!-- expanders with ccy go here dynamically at run-time -->
                                </StackPanel>
                            </ScrollViewer>
                            
                        </Grid>
                        <Grid Background="Transparent" x:Name="GridCenter" Margin="153,0,286,0"  Visibility="Visible">
                                                        
                            <chartingToolkit:Chart Cursor="Arrow" HorizontalAlignment="Stretch" Margin="0,0,-25,0" x:Name="chart1" Title="" VerticalAlignment="Stretch" Padding="0" MinWidth="0" BorderThickness="1" UseLayoutRounding="False" Background="Transparent">
                                <chartingToolkit:Chart.BorderBrush>
                                    <SolidColorBrush />
                                </chartingToolkit:Chart.BorderBrush>
                              
                                <chartingToolkit:Chart.Axes>
                                    <chartingToolkit:LinearAxis Orientation="X" ShowGridLines="true" Location="Top">
                                        <!-- customize X-labels -->
                                        <chartingToolkit:LinearAxis.AxisLabelStyle>
                                            <Style TargetType="chartingToolkit:AxisLabel">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="chartingToolkit:AxisLabel">
                                                            <TextBlock Text="{Binding Converter={StaticResource kTermToStringConverter}}" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </chartingToolkit:LinearAxis.AxisLabelStyle>
                                    </chartingToolkit:LinearAxis>
                                    <chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="" />
                                </chartingToolkit:Chart.Axes>
                               
                                <!-- hide legend -->
                                <chartingToolkit:Chart.LegendStyle>
                                    <Style TargetType="Control">
                                        <Setter Property="BorderBrush" Value="Transparent" />
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="Opacity" Value="0" />
                                    </Style>
                                </chartingToolkit:Chart.LegendStyle>
                               
                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
            			                                    PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Margin="0,0,0,0"
            			                                    IsSelectionEnabled="True" Width="420" />


                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle2}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" Margin="0,0,0,0" 
                                                            IsSelectionEnabled="True" Width="420" />

                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle3}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" 
                                                            IsSelectionEnabled="True" Margin="0,0,0,0" />

                            </chartingToolkit:Chart>

                            <Button Height="20" Click="button4_Click" Margin="0,0,0,0" Name="button3" VerticalAlignment="Top" Opacity="1" Padding="0" Width="20" BorderThickness="1" HorizontalAlignment="Left">
                                <Image Source="/YieldCurveSL;component/Images/Settings.png" Height="20" Width="20" Margin="0" UseLayoutRounding="False" />
                            </Button>
                            
                            <Button Click="Refresh_Click" Height="20" HorizontalAlignment="Left" Margin="20.5,0,0,0" x:Name="button2" VerticalAlignment="Top" Width="20" UseLayoutRounding="False" Padding="0">
                                <Image Source="/YieldCurveSL;component/Images/Refresh.png" Height="20" Width="20" Margin="0" />
                            </Button>
                            
                            <Button Height="20" Width="20" HorizontalAlignment="Left" Margin="41,0,0,0" Name="button1" VerticalAlignment="Top" Click="buttonCompare_Click" Padding="0" UseLayoutRounding="False">
                                <Image Source="/YieldCurveSL;component/Images/Twocurve.png" Height="18" Width="18" Margin="0" ImageFailed="Image_ImageFailed" UseLayoutRounding="False"/>
                            </Button>
                            
                            <controls:DatePicker HorizontalAlignment="Left" IsEnabled="True" Margin="345,0,0,0" x:Name="datePicker1" VerticalAlignment="Top" SelectedDateChanged="datePicker1_SelectedDateChanged" Height="20" Width="103" />
                            
                            <local:RangeSlider x:Name="rangeSlider" Minimum="0" Maximum="1" MinimumRangeSpan="0.1" Height="15" HorizontalAlignment="Left" Margin="30,0,0,0" VerticalAlignment="Bottom" Width="415" Style="{StaticResource ycRangeSlider}" BorderBrush="Silver" Grid.ColumnSpan="2" />
                        </Grid>
                        
                        <Grid Background="Transparent" x:Name="GridRight" Margin="601,0,-5,0"  Visibility="Visible">

                            <data:DataGrid AutoGenerateColumns="False" Margin="0,35,0,246" Name="dataGridEntryRates" LoadingRow="dataGridEntryRates_LoadingRow">
                                <data:DataGrid.Columns>
                                    <data:DataGridTextColumn Binding="{Binding type}" Header="Type" Width="50" IsReadOnly="True" />
                                    <data:DataGridTextColumn Binding="{Binding maturity}" Header="Term" IsReadOnly="True" />
                                    <data:DataGridTextColumn Binding="{Binding value, Converter={StaticResource kRateFormatConverter}}" Header="Value" IsReadOnly="True" />
                                    <data:DataGridTemplateColumn Header="Reference">
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <HyperlinkButton Click="button3_Click" Margin="4" Content="{Binding reference}" Width="280" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>
                                </data:DataGrid.Columns>
                            </data:DataGrid>
                            
                            <data:DataGrid AutoGenerateColumns="False" Margin="0,259,0,4" Name="dataGridOutput" SelectionChanged="dataGridOutput_SelectionChanged" HorizontalAlignment="Left" Width="284">
                                <data:DataGrid.Columns>
                                    <data:DataGridTemplateColumn Header="Date" Width="73" >
                                        <data:DataGridTemplateColumn.CellEditingTemplate>
                                            <DataTemplate>
                                                <controls:DatePicker SelectedDate="{Binding dateToDiscount, Mode=TwoWay}" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellEditingTemplate>
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding dateToDiscount, Converter={StaticResource kDateTimeFormatConverter}}" Margin="4" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>
                                    <data:DataGridTextColumn Width="65" Binding="{Binding zcRate, Converter={StaticResource kRateFormatConverter}}" Header="ZC Rate" IsReadOnly="True" />
                                    <data:DataGridTextColumn Width="67" Binding="{Binding discount, Converter={StaticResource kRateFormatConverter}}" Header="Discount" IsReadOnly="True" />
                                    <data:DataGridTextColumn Binding="{Binding frwRate, Converter={StaticResource kRateFormatConverter}}" Header="Forw Rate" IsReadOnly="True" />
                                </data:DataGrid.Columns>
                            </data:DataGrid>

                            <dataInput:Label Content="Entry data" FontWeight="Bold" Height="20" Margin="100,10,0,0" Name="label1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="69" HorizontalContentAlignment="Center" />
                            
                            <dataInput:Label Content="Discounts" FontWeight="Bold" Height="29" Name="label2" Width="69" Margin="100,237,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" />
                            
                            <Button Height="20" Click="button5_Click" Name="button4" Width="58" Margin="1,236,0,0" UseLayoutRounding="False" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Top" Content="Save ..."></Button>

                        </Grid>
                    </Grid>

                    <Grid Background="Transparent" x:Name="LayoutChart2" Margin="0,0,0,0"  Visibility="Collapsed">
                        <Grid x:Name="GridLeft3" Margin="0,0,735,0"  Visibility="Visible">
                            <Grid.Background>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="Black" Offset="0" />
                                    <GradientStop Color="#FFF2F2F2" Offset="0" />
                                </LinearGradientBrush>
                            </Grid.Background>
                            
                            <ComboBox Height="21" HorizontalAlignment="Left" Margin="6,10,0,0" Name="comboBox1" VerticalAlignment="Top" Width="110" Background="#FF1F3B53" Foreground="Black" Padding="0" />
                            <local:ColorPicker Color="Blue" Height="9" HorizontalAlignment="Left" Margin="6,37,0,0" x:Name="colorPicker1" VerticalAlignment="Top" Width="110" Background="#FF1F3B53" />
                            <ComboBox Height="21" HorizontalAlignment="Left" Margin="6,73,0,0" Name="comboBox2" VerticalAlignment="Top" Width="110" Background="#FF1F3B53" />
                            <local:ColorPicker Color="Red" Height="9" HorizontalAlignment="Left" Margin="6,100,0,0" x:Name="colorPicker2" VerticalAlignment="Top" Width="110" Background="#FF1F3B53" />
                            <Button Content="Compare" Height="25" HorizontalAlignment="Left" Margin="8,128,0,0" 
                                    Name="button5" VerticalAlignment="Top" Width="108" Click="buttonCompare_Click1"/>
                        </Grid>
                        
                        <Grid Background="Transparent" x:Name="GridCenter3" Margin="153,0,286,0"  Visibility="Visible">

                            <chartingToolkit:Chart Background="White" Cursor="Arrow" MinWidth="0" Name="chart3a" Padding="0" BorderBrush="{x:Null}" HorizontalAlignment="Stretch" Margin="0,0,-25,0"  VerticalAlignment="Bottom" Height="187">
                                
                                <chartingToolkit:Chart.Axes>
                                    <chartingToolkit:LinearAxis Location="Top" Orientation="X" ShowGridLines="true" Height="Auto" Margin="0,-50">
                                        <chartingToolkit:LinearAxis.AxisLabelStyle>
                                            <Style TargetType="chartingToolkit:AxisLabel">
                                                <Setter Property="Control.Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="chartingToolkit:AxisLabel">
                                                            <TextBlock Text="{Binding Converter={StaticResource kTermToStringConverter}}" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </chartingToolkit:LinearAxis.AxisLabelStyle>
                                    </chartingToolkit:LinearAxis>
                                    <chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="" />
                                </chartingToolkit:Chart.Axes>
                                
                                <chartingToolkit:Chart.LegendStyle>
                                    <Style TargetType="Control">
                                        <Setter Property="Control.BorderBrush" Value="Transparent" />
                                        <Setter Property="Control.Background" Value="Transparent" />
                                        <Setter Property="UIElement.Opacity" Value="0" />
                                    </Style>
                                </chartingToolkit:Chart.LegendStyle>

                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle2}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
            			                                    PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Margin="0,0,0,0"
            			                                    IsSelectionEnabled="True" Width="420" />
                                
                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle2}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" Margin="0,0,0,0" 
                                                            IsSelectionEnabled="True" Width="420" />

                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle3}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" 
                                                            IsSelectionEnabled="True" Margin="0,0,0,0" />

                            </chartingToolkit:Chart>
                            
                            <chartingToolkit:Chart Background="White" Cursor="Arrow" MinWidth="0" Name="chart4a" Padding="0" BorderBrush="{x:Null}" HorizontalAlignment="Stretch" Margin="0,0,-25,150" VerticalAlignment="Top" Height="320" >
                                
                                <chartingToolkit:Chart.Axes>
                                    <chartingToolkit:LinearAxis Height="Auto" Location="Top" Margin="0,-50" Orientation="X" ShowGridLines="true">
                                        <chartingToolkit:LinearAxis.AxisLabelStyle>
                                            <Style TargetType="chartingToolkit:AxisLabel">
                                                <Setter Property="Control.Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="chartingToolkit:AxisLabel">
                                                            <TextBlock Text="{Binding Converter={StaticResource kTermToStringConverter}}" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </chartingToolkit:LinearAxis.AxisLabelStyle>
                                    </chartingToolkit:LinearAxis>
                                    <chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="" />
                                </chartingToolkit:Chart.Axes>
                                
                                <chartingToolkit:Chart.LegendStyle>
                                    <Style TargetType="Control">
                                        <Setter Property="Control.BorderBrush" Value="Transparent" />
                                        <Setter Property="Control.Background" Value="Transparent" />
                                        <Setter Property="UIElement.Opacity" Value="0" />
                                    </Style>
                                </chartingToolkit:Chart.LegendStyle>
                                
                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle2}" 
                                                            DependentValueBinding="{Binding rate}" 
                                                            IndependentValueBinding="{Binding length}" 
                                                            IsEnabled="True" IsSelectionEnabled="True" 
                                                            Margin="0,0,0,0" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
                                                            Title="" Width="420" />
                                
                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle2}" 
                                                            DependentValueBinding="{Binding rate}" 
                                                            IndependentValueBinding="{Binding length}" 
                                                            IsEnabled="True" IsSelectionEnabled="True" 
                                                            Margin="0,0,0,0" Padding="0" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
                                                            Title="" Width="420" />
                                
                                <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle3}" 
                                                            DependentValueBinding="{Binding rate}" 
                                                            IndependentValueBinding="{Binding length}" 
                                                            IsEnabled="True" IsSelectionEnabled="True" 
                                                            Margin="0,0,0,0" Padding="0" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
                                                            Title="" />
                            
                            </chartingToolkit:Chart>

                            <Button Height="20" Click="button4_Click" Margin="0,0,0,0" Name="button33" VerticalAlignment="Top" Opacity="1" Padding="0" Width="20" BorderThickness="1" HorizontalAlignment="Left">
                                <Image Source="/YieldCurveSL;component/Images/Settings.png" Height="20" Width="20" Margin="0" UseLayoutRounding="False" />
                            </Button>
                            
                            <Button Click="Refresh_Click" Height="20" HorizontalAlignment="Left" Margin="20.5,0,0,0" x:Name="button23" VerticalAlignment="Top" Width="20" UseLayoutRounding="False" Padding="0">
                                <Image Source="/YieldCurveSL;component/Images/Refresh.png" Height="20" Width="20" Margin="0" />
                            </Button>
                            
                            <Button Height="20" Width="20" HorizontalAlignment="Left" Margin="41,0,0,0" Name="button13" VerticalAlignment="Top" Click="buttonCompareBack_Click" Padding="0" UseLayoutRounding="False">
                                <Image Source="/YieldCurveSL;component/Images/Onecurve.png" Height="18" Width="18" Margin="0" ImageFailed="Image_ImageFailed" UseLayoutRounding="False"/>
                            </Button>
                            
                            <controls:DatePicker HorizontalAlignment="Left" IsEnabled="True" Margin="345,0,0,0" x:Name="datePicker13" VerticalAlignment="Top" SelectedDateChanged="datePicker1_SelectedDateChanged" Height="20" Width="103" />
                            
                            <local:RangeSlider x:Name="rangeSlider3" Minimum="0" Maximum="1" MinimumRangeSpan="0.1" 
                                               Height="15" HorizontalAlignment="Left" Margin="30,0,0,0" 
                                               VerticalAlignment="Bottom" Width="415" 
                                               Style="{StaticResource ycRangeSlider}" 
                                               BorderBrush="Silver" />
                        
                        </Grid>
                        
                        <Grid Background="Transparent" x:Name="GridRight3" Margin="601,0,-5,0"  Visibility="Visible">
                            
                            <dataInput:Label Content="Spread" FontWeight="Bold" Height="20" Margin="100,10,0,0" Name="label13" HorizontalAlignment="Left" VerticalAlignment="Top" Width="69" HorizontalContentAlignment="Center" />

                            <data:DataGrid AutoGenerateColumns="False" Name="dataGridDiff" Width="286" Height="436" VerticalAlignment="Bottom">
                                <data:DataGrid.Columns>
                                    <data:DataGridTemplateColumn Header="Date" Width="73">
                                        <data:DataGridTemplateColumn.CellEditingTemplate>
                                            <DataTemplate>
                                                <controls:DatePicker SelectedDate="{Binding dateToDiscount, Mode=TwoWay}" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellEditingTemplate>
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Margin="4" Text="{Binding dateToDiscount, Converter={StaticResource kDateTimeFormatConverter}}" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>
                                    <data:DataGridTextColumn Binding="{Binding zcRate, Converter={StaticResource kRateFormatConverter}}" Header="Rate 1" IsReadOnly="True" Width="65" />
                                    <data:DataGridTextColumn Binding="{Binding discount, Converter={StaticResource kRateFormatConverter}}" Header="Rate 2" IsReadOnly="True" Width="67" />
                                    <data:DataGridTextColumn Binding="{Binding frwRate, Converter={StaticResource kRateFormatConverter}}" Header="Spread" IsReadOnly="True" />
                                </data:DataGrid.Columns>
                            </data:DataGrid>

                        </Grid>
                    </Grid>
                </Grid>

            </controls:TabItem>
            <controls:TabItem Header="FX curves" Name="tabItem2">
                <Grid>
                    <chartingToolkit:Chart Background="White" Cursor="Arrow" HorizontalAlignment="Left" Margin="14,-31,0,0" MinWidth="0" Name="chart2" Padding="20" Title="" Width="499" BorderBrush="{x:Null}">
                        <chartingToolkit:Chart.Axes>
                            <chartingToolkit:LinearAxis Location="Top" Orientation="X" ShowGridLines="true">
                                <chartingToolkit:LinearAxis.AxisLabelStyle>
                                    <Style TargetType="chartingToolkit:AxisLabel">
                                        <Setter Property="Control.Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="chartingToolkit:AxisLabel">
                                                    <TextBlock Text="{Binding Converter={StaticResource kTermToStringConverter}}" />
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </chartingToolkit:LinearAxis.AxisLabelStyle>
                            </chartingToolkit:LinearAxis>
                            <chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="" />
                        </chartingToolkit:Chart.Axes>
                        <chartingToolkit:Chart.LegendStyle>
                            <Style TargetType="Control">
                                <Setter Property="Control.BorderBrush" Value="Transparent" />
                                <Setter Property="Control.Background" Value="Transparent" />
                                <Setter Property="UIElement.Opacity" Value="0" />
                            </Style>
                        </chartingToolkit:Chart.LegendStyle>
                        
                        <chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle}" 
                                                    DependentValueBinding="{Binding rate}" 
                                                    IndependentValueBinding="{Binding length}" 
                                                    IsEnabled="True" IsSelectionEnabled="True" 
                                                    Margin="0,0,0,0" 
                                                    PolylineStyle="{StaticResource kPolylineStyle}" 
                                                    Title="" Width="420" />
                        
                    </chartingToolkit:Chart>
                    
                    <Grid Height="457" HorizontalAlignment="Left" Margin="488,14,0,0" Name="grid1" VerticalAlignment="Top" Width="391">

                        <data:DataGrid AutoGenerateColumns="False" Margin="14,259,16,6" Name="dataGridForwardRate">

                            <data:DataGrid.Columns>
                                <data:DataGridTemplateColumn Header="Date" Width="80">
                                    <data:DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <controls:DatePicker SelectedDate="{Binding dateToDiscount, Mode=TwoWay}" />
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellEditingTemplate>
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Margin="4" Text="{Binding dateToDiscount, Converter={StaticResource kDateTimeFormatConverter}}" />
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTextColumn Binding="{Binding frwRate, Converter={StaticResource kRateFormatConverter}}" Header="Forw Rate" IsReadOnly="True" />
                            </data:DataGrid.Columns>
                        </data:DataGrid>
                        <data:DataGrid AutoGenerateColumns="False" Height="217" HorizontalAlignment="Left" Margin="10,14,0,0" Name="dataGridCrossCurrency" VerticalAlignment="Top" Width="365" ColumnWidth="50">
                            <data:DataGrid.Columns>

                                <data:DataGridTemplateColumn Header="" >
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Style="{StaticResource ButtonStyle}" Content="{Binding Currency}" BorderThickness="0" />
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col0">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     Content="{Binding col0}" ToolTipService.ToolTip="Click to see FX curve"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col1">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col1}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col2">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col2}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col3">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col3}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col4">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col4}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col5">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col5}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn Header="col6" >
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button  Template="{StaticResource FXBtnTemplate}" Click="fx_loaded" Background="Transparent" 
                                                     ToolTipService.ToolTip="Click to see FX curve" Content="{Binding col6}"/>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                            </data:DataGrid.Columns>

                        </data:DataGrid>
                    </Grid>
                    <Border BorderBrush="Silver" BorderThickness="1" Height="457" HorizontalAlignment="Left" Margin="18,14,0,0" Name="border3" VerticalAlignment="Top" Width="464"></Border>
                </Grid>    
            </controls:TabItem>
            <controls:TabItem Header="Inflation curves" Name="tabItem3" IsEnabled="True" Loaded="tabItem3_Loaded">
                <Grid Background="Transparent" x:Name="LayoutChartMainInflation" Margin="0,0,0,0" >
                    <Grid Background="Transparent" x:Name="LayoutChartInflation1" Margin="0,0,0,0"  Visibility="Visible">
                        <Grid Background="Transparent" x:Name="GridInflationLeft" Margin="0,0,735,0"  Visibility="Visible">
                           <!-- Expander control -->
                            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                                <ScrollViewer.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="White" Offset="0" />
                                        <GradientStop Color="Gray" Offset="3" />
                                        <GradientStop Color="#FFF2F2F2" Offset="0" />
                                    </LinearGradientBrush>
                                </ScrollViewer.Background>
                                <StackPanel x:Name="ExpanderStackInflationParent">
                                    <!-- expanders with ccy go here dynamically at run-time -->
                                </StackPanel>
                            </ScrollViewer>

                        </Grid>
                        <Grid Background="Transparent" x:Name="GridInflationCenter" Margin="153,0,286,0"  Visibility="Visible">

                            <chartingToolkit:Chart Cursor="Arrow" HorizontalAlignment="Stretch" Margin="6,0,-76,0" x:Name="chartInflation1" Title="" VerticalAlignment="Stretch" Padding="0" MinWidth="0" BorderThickness="1" UseLayoutRounding="False" Background="Transparent" Width="519">
                                <chartingToolkit:Chart.BorderBrush>
                                    <SolidColorBrush />
                                </chartingToolkit:Chart.BorderBrush>

                                <chartingToolkit:Chart.Axes>
                                    <chartingToolkit:LinearAxis Orientation="X" ShowGridLines="true" Location="Top">
                                        <!-- customize X-labels -->
                                        <chartingToolkit:LinearAxis.AxisLabelStyle>
                                            <Style TargetType="chartingToolkit:AxisLabel">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="chartingToolkit:AxisLabel">
                                                            <TextBlock Text="{Binding Converter={StaticResource kTermToStringConverter}}" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </chartingToolkit:LinearAxis.AxisLabelStyle>
                                    </chartingToolkit:LinearAxis>
                                    <!--chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="ZC rates" Location="Left" Maximum="10"/-->
                                    <!--chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="true" Title="Inflation Index" Location="Right" Maximum="100"/-->

                                </chartingToolkit:Chart.Axes>

                                <!-- hide legend -->
                                <chartingToolkit:Chart.LegendStyle>
                                    <Style TargetType="Control">
                                        <Setter Property="BorderBrush" Value="Transparent" />
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="Opacity" Value="0" />
                                    </Style>
                                </chartingToolkit:Chart.LegendStyle>

                                <chartingToolkit:LineSeries DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
                                                            DataPointStyle="{StaticResource kLineDataPointStyle}" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
                                                            IsSelectionEnabled="True" >
                                        <!--chartingToolkit:LineSeries.DependentRangeAxis>
                                        <chartingToolkit:LinearAxis Name="LeftInflationAxis1" 
                                                                    Orientation="Y" 
                                                                    Title="Entry rates, ZC rates" Minimum="0"  
                                                                    ShowGridLines="True" Location="Left"/>
                                        </chartingToolkit:LineSeries.DependentRangeAxis-->
                                </chartingToolkit:LineSeries>

                                <chartingToolkit:LineSeries DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
                                                            DataPointStyle="{StaticResource kLineDataPointStyle2}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" Margin="0,0,0,0" 
                                                            IsSelectionEnabled="True" Width="420" >
                                    <chartingToolkit:LineSeries.DependentRangeAxis>
                                        <chartingToolkit:LinearAxis Orientation="Y" 
                                                                    Title="Inflation Index" Minimum="0"  
                                                                    ShowGridLines="False" Location="Right" />
                                    </chartingToolkit:LineSeries.DependentRangeAxis>
                                </chartingToolkit:LineSeries>

                                <chartingToolkit:LineSeries DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
                                                            DataPointStyle="{StaticResource kLineDataPointStyle3}" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
                                                            IsSelectionEnabled="True" >
                                    <!--chartingToolkit:LineSeries.DependentRangeAxis>
                                        <chartingToolkit:LinearAxis Orientation="Y" 
                                                                    Minimum="0" ShowGridLines="False" 
                                                                    Location="Left" Opacity="100"/>
                                    </chartingToolkit:LineSeries.DependentRangeAxis-->
                                </chartingToolkit:LineSeries>


                                <!--chartingToolkit:LineSeries DataPointStyle="{StaticResource kLineDataPointStyle3}" 
            			                                    DependentValueBinding="{Binding rate}" 
            			                                    IndependentValueBinding="{Binding length}" 
            			                                    IsEnabled="True" 
                                                            PolylineStyle="{StaticResource kPolylineStyle}" 
            			                                    Title="" Padding="0" 
                                                            IsSelectionEnabled="True" Margin="0,0,0,0" /-->

                            </chartingToolkit:Chart>

                            <Button Height="20" Click="button4_Click" Margin="0,0,0,0" Name="buttonInflation3" VerticalAlignment="Top" Opacity="1" Padding="0" Width="20" BorderThickness="1" HorizontalAlignment="Left">
                                <Image Source="/YieldCurveSL;component/Images/Settings.png" Height="20" Width="20" Margin="0" UseLayoutRounding="False" />
                            </Button>

                            <Button Click="Refresh_Click" Height="20" HorizontalAlignment="Left" Margin="20.5,0,0,0" x:Name="buttonInflation2" VerticalAlignment="Top" Width="20" UseLayoutRounding="False" Padding="0">
                                <Image Source="/YieldCurveSL;component/Images/Refresh.png" Height="20" Width="20" Margin="0" />
                            </Button>

                            <Button Height="20" Width="20" HorizontalAlignment="Left" Margin="41,0,0,0" Name="buttonInflation1" VerticalAlignment="Top" Click="buttonCompare_Click" Padding="0" UseLayoutRounding="False">
                                <Image Source="/YieldCurveSL;component/Images/Twocurve.png" Height="18" Width="18" Margin="0" ImageFailed="Image_ImageFailed" UseLayoutRounding="False"/>
                            </Button>

                            <controls:DatePicker HorizontalAlignment="Left" IsEnabled="True" Margin="345,0,0,0" x:Name="datePickerInflation1" VerticalAlignment="Top" SelectedDateChanged="datePicker1_SelectedDateChanged" Height="20" Width="103" />

                            <local:RangeSlider x:Name="rangeInflationSlider" Minimum="0" Maximum="1" MinimumRangeSpan="0.1" Height="15" HorizontalAlignment="Left" Margin="30,0,0,0" VerticalAlignment="Bottom" Width="415" Style="{StaticResource ycRangeSlider}" BorderBrush="Silver" Grid.ColumnSpan="2" />
                        </Grid>
                        <Grid Background="Transparent" x:Name="GridInflationRight" Margin="601,0,-5,0"  Visibility="Visible">

                            <data:DataGrid AutoGenerateColumns="False" Margin="0,35,0,246" Name="dataGridInflationEntryRates" LoadingRow="dataGridEntryRates_LoadingRow">
                                <data:DataGrid.Columns>
                                    <data:DataGridTextColumn Binding="{Binding type}" Header="Type" Width="50" IsReadOnly="True" />
                                    <data:DataGridTextColumn Binding="{Binding maturity}" Header="Term" IsReadOnly="True" />
                                    <data:DataGridTextColumn Binding="{Binding value, Converter={StaticResource kRateFormatConverter}}" Header="Value" IsReadOnly="True" />
                                    <data:DataGridTemplateColumn Header="Reference">
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <HyperlinkButton Click="button_EntryRateHyperlink_Click" Margin="4" Content="{Binding reference}" Width="280" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>
                                </data:DataGrid.Columns>
                            </data:DataGrid>

                            <data:DataGrid AutoGenerateColumns="False" Margin="0,259,0,4" Name="dataGridInflationOutput" SelectionChanged="dataGridOutput_SelectionChanged" HorizontalAlignment="Left" Width="284">
                                <data:DataGrid.Columns>
                                    <data:DataGridTemplateColumn Header="Date" Width="73">
                                        <data:DataGridTemplateColumn.CellEditingTemplate>
                                            <DataTemplate>
                                                <controls:DatePicker SelectedDate="{Binding dateToDiscount, Mode=TwoWay}" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellEditingTemplate>
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding dateToDiscount, Converter={StaticResource kDateTimeFormatConverter}}" Margin="4" />
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>
                                    <data:DataGridTextColumn Width="65" Binding="{Binding zcRate, Converter={StaticResource kRateFormatConverter}}" Header="ZC Rate" IsReadOnly="True" />
                                    <data:DataGridTextColumn Width="67" Binding="{Binding discount, Converter={StaticResource kRateFormatConverter}}" Header="Index" IsReadOnly="True" />
                                    <!-- data:DataGridTextColumn Binding="{Binding frwRate, Converter={StaticResource kRateFormatConverter}}" Header="Forw Rate" IsReadOnly="True" /-->
                                </data:DataGrid.Columns>
                            </data:DataGrid>

                            <dataInput:Label Content="Entry data" FontWeight="Bold" Height="20" Margin="100,10,0,0" Name="labelInflation1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="69" HorizontalContentAlignment="Center" />

                            <dataInput:Label Content="Discounts" FontWeight="Bold" Height="29" Name="labelInflation2" Width="69" Margin="100,237,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" />

                            <Button Height="20" Click="button5_Click" Name="buttonInflation4" Width="58" Margin="1,236,0,0" UseLayoutRounding="False" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Top" Content="Save ..."></Button>

                        </Grid>
                    </Grid>
                </Grid>
            </controls:TabItem>
            <controls:TabItem Header="Credit curves" Name="tabItem4" IsEnabled="False">
                <Grid />
            </controls:TabItem>
            <controls:TabItem Header="Data Feed" Name="tabItem5">
                <Grid>
                    <local:DataFeed Height="472" HorizontalAlignment="Left" Margin="6,6,6,6" x:Name="dataFeedControl1" VerticalAlignment="Top" Width="876" />
                    <Border BorderBrush="Silver" BorderThickness="1" Height="450" HorizontalAlignment="Left" Margin="7,7,7,7" Name="border1" VerticalAlignment="Top" Width="875"></Border>
                </Grid>
            </controls:TabItem>
            
  
      </controls:TabControl>
    </Grid>

</navigation:Page>
